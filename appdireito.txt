import React, { useState, useEffect, useCallback } from 'react';

// =================================================================
// 1. MOCK DATA (Simula√ß√£o de Fonte de Dados - Quest√µes OAB-SP)
// =================================================================
// Gerado para as 6 disciplinas do 1¬∫ Semestre, com Justificativa detalhada.
const mockDataQuestoes = [
    // --- INTRODU√á√ÉO AO ESTUDO DO DIREITO (IED) ---
    { id: 1, materia: "INTRODU√á√ÉO AO ESTUDO DO DIREITO (IED)", enunciado: "Qual das teorias abaixo define a norma jur√≠dica a partir da coer√ß√£o exercida pelo Estado?", opcoes: ["Teoria Pura do Direito", "Teoria Tridimensional do Direito", "Teoria Imperativista", "Teoria da Institui√ß√£o"], respostaCorreta: "Teoria Imperativista", justificativa: "A Teoria Imperativista v√™ o Direito como um conjunto de comandos emanados de uma autoridade soberana (o Estado), sendo a coer√ß√£o o elemento essencial para a sua validade e efic√°cia. A Teoria Pura de Kelsen foca na validade formal; a Tridimensional de Reale abrange Fato, Valor e Norma." },
    { id: 2, materia: "INTRODU√á√ÉO AO ESTUDO DO DIREITO (IED)", enunciado: "O que o conceito de 'Vig√™ncia' de uma norma jur√≠dica determina?", opcoes: ["Sua aplica√ß√£o retroativa", "Sua aptid√£o para produzir efeitos", "Sua aceita√ß√£o social", "Sua constitucionalidade"], respostaCorreta: "Sua aptid√£o para produzir efeitos", justificativa: "A vig√™ncia refere-se ao per√≠odo de tempo em que a norma √© obrigat√≥ria e pode produzir seus efeitos jur√≠dicos, ou seja, √© o per√≠odo de validade temporal da lei. √â diferente de efic√°cia social (aplica√ß√£o pr√°tica) ou validade formal." },
    { id: 3, materia: "INTRODU√á√ÉO AO ESTUDO DO DIREITO (IED)", enunciado: "Segundo a Lei de Introdu√ß√£o √†s Normas do Direito Brasileiro (LINDB), quando a lei for omissa, o juiz deve decidir o caso utilizando, sucessivamente:", opcoes: ["A analogia, os costumes e os princ√≠pios gerais de direito", "Os costumes, a jurisprud√™ncia e a doutrina", "A equidade, a moral e a boa-f√©", "A analogia, a doutrina e a jurisprud√™ncia"], respostaCorreta: "A analogia, os costumes e os princ√≠pios gerais de direito", justificativa: "A LINDB (Decreto-Lei n¬∫ 4.657/42), em seu Art. 4¬∫, estabelece expressamente: 'Quando a lei for omissa, o juiz decidir√° o caso de acordo com a analogia, os costumes e os princ√≠pios gerais de direito'." },

    // --- CI√äNCIA POL√çTICA E TEORIA GERAL DO ESTADO ---
    { id: 4, materia: "CI√äNCIA POL√çTICA E TEORIA GERAL DO ESTADO", enunciado: "De acordo com Max Weber, qual o elemento fundamental que caracteriza o Estado moderno?", opcoes: ["O monop√≥lio do poder econ√¥mico", "A legitimidade do poder espiritual", "O monop√≥lio do uso leg√≠timo da for√ßa f√≠sica em determinado territ√≥rio", "O dom√≠nio absoluto sobre a soberania popular"], respostaCorreta: "O monop√≥lio do uso leg√≠timo da for√ßa f√≠sica em determinado territ√≥rio", justificativa: "Max Weber define o Estado como a comunidade humana que reivindica (com sucesso) o monop√≥lio do uso leg√≠timo da for√ßa f√≠sica dentro de um determinado territ√≥rio. √â a capacidade de impor a ordem pela for√ßa aceita pela sociedade que define a estatalidade." },
    { id: 5, materia: "CI√äNCIA POL√çTICA E TEORIA GERAL DO ESTADO", enunciado: "Na teoria pol√≠tica cl√°ssica de Montesquieu, a separa√ß√£o dos poderes (Executivo, Legislativo e Judici√°rio) tem como principal finalidade:", opcoes: ["Concentrar o poder nas m√£os do soberano", "Garantir a supremacia do Legislativo", "Evitar o abuso de poder e assegurar a liberdade", "Facilitar a cobran√ßa de impostos"], respostaCorreta: "Evitar o abuso de poder e assegurar a liberdade", justificativa: "Montesquieu, em 'O Esp√≠rito das Leis', defende a separa√ß√£o e o equil√≠brio dos poderes (Checks and Balances) como o meio essencial para impedir a tirania e proteger as liberdades individuais." },
    { id: 6, materia: "CI√äNCIA POL√çTICA E TEORIA GERAL DO ESTADO", enunciado: "Qual regime pol√≠tico se caracteriza pela participa√ß√£o direta do povo nas decis√µes, sem a figura de representantes eleitos?", opcoes: ["Democracia Indireta", "Monarquia Parlamentar", "Democracia Semidireta", "Democracia Pura (Direta)"], respostaCorreta: "Democracia Pura (Direta)", justificativa: "Na Democracia Pura ou Direta, os cidad√£os participam diretamente da formula√ß√£o das leis e decis√µes, sem intermedia√ß√£o de representantes. √â o modelo praticado na Gr√©cia Antiga e, em pequena escala, por instrumentos modernos como o referendo (Democracia Semidireta)." },

    // --- HIST√ìRIA DO DIREITO ---
    { id: 7, materia: "HIST√ìRIA DO DIREITO", enunciado: "Qual o c√≥digo jur√≠dico da Antiguidade, datado de aproximadamente 1772 a.C., que se notabilizou pela aplica√ß√£o da Lei de Tali√£o ('olho por olho, dente por dente')?", opcoes: ["C√≥digo de Dr√°con", "C√≥digo de Hamurabi", "Leis das XII T√°buas", "Lei Mosaica"], respostaCorreta: "C√≥digo de Hamurabi", justificativa: "O C√≥digo de Hamurabi, da Mesopot√¢mia, √© um dos mais antigos conjuntos de leis escritas e √© famoso por codificar a Lei de Tali√£o, embora sua aplica√ß√£o fosse frequentemente modulada pela classe social das partes envolvidas." },
    { id: 8, materia: "HIST√ìRIA DO DIREITO", enunciado: "No Direito Romano, a distin√ß√£o entre 'Jus Publicum' e 'Jus Privatum' foi consolidada por qual jurista cl√°ssico?", opcoes: ["Gaio", "Ulpiano", "C√≠cero", "Justiniano"], respostaCorreta: "Ulpiano", justificativa: "O jurista romano Domicio Ulpiano √© o respons√°vel pela cl√°ssica distin√ß√£o entre Direito P√∫blico (referente ao Estado Romano) e Direito Privado (referente aos interesses dos particulares). Seu aforismo 'Publicum Jus est quod ad statum rei Romanae spectat, privatum quod ad singulorum utilitatem' √© central para a teoria do Direito." },
    { id: 9, materia: "HIST√ìRIA DO DIREITO", enunciado: "Qual o evento hist√≥rico no Brasil marcou a transi√ß√£o do sistema jur√≠dico de leis e costumes de Portugal para a primeira codifica√ß√£o de Direito Civil brasileira?", opcoes: ["A Proclama√ß√£o da Rep√∫blica (1889)", "A Independ√™ncia do Brasil (1822)", "A promulga√ß√£o do C√≥digo Civil de 1916", "A Revolu√ß√£o de 1930"], respostaCorreta: "A promulga√ß√£o do C√≥digo Civil de 1916", justificativa: "O C√≥digo Civil de 1916 (Lei n¬∫ 3.071), de autoria de Clovis Bevilacqua, marcou o fim da vig√™ncia das Ordena√ß√µes Filipinas no Brasil, substituindo a legisla√ß√£o colonial portuguesa e estabelecendo um marco de moderniza√ß√£o jur√≠dica." },

    // --- DIREITOS HUMANOS ---
    { id: 10, materia: "DIREITOS HUMANOS", enunciado: "O Princ√≠pio da N√£o-Regress√£o (ou Efeito Cl√°usula) em Direitos Humanos significa que:", opcoes: ["Os tratados de Direitos Humanos n√£o podem ser ratificados", "Os direitos adquiridos n√£o podem ser suprimidos ou diminu√≠dos", "Apenas as leis federais podem tratar de Direitos Humanos", "O Estado n√£o pode ser responsabilizado por viola√ß√µes passadas"], respostaCorreta: "Os direitos adquiridos n√£o podem ser suprimidos ou diminu√≠dos", justificativa: "O Princ√≠pio da N√£o-Regress√£o estabelece que o Estado, uma vez reconhecido um direito humano, n√£o pode adotar medidas que o suprimam ou o restrinjam a um patamar inferior ao j√° alcan√ßado, garantindo a evolu√ß√£o progressiva dos direitos." },
    { id: 11, materia: "DIREITOS HUMANOS", enunciado: "A primeira dimens√£o (ou gera√ß√£o) dos Direitos Humanos est√° historicamente ligada a qual evento e quais direitos?", opcoes: ["Revolu√ß√£o Industrial, Direitos Sociais", "Guerra Fria, Direitos de Solidariedade", "Revolu√ß√£o Francesa, Direitos de Liberdade (Civis e Pol√≠ticos)", "Era da Informa√ß√£o, Direitos Digitais"], respostaCorreta: "Revolu√ß√£o Francesa, Direitos de Liberdade (Civis e Pol√≠ticos)", justificativa: "Os Direitos de Primeira Dimens√£o surgiram com o Iluminismo e as Revolu√ß√µes Liberais (Francesa e Americana), focando nas liberdades individuais e na n√£o-interven√ß√£o do Estado (direitos de 'n√£o fazer')." },
    { id: 12, materia: "DIREITOS HUMANOS", enunciado: "A dignidade da pessoa humana √© considerada o fundamento da Rep√∫blica Federativa do Brasil, conforme qual dispositivo legal?", opcoes: ["Art. 1¬∫, II, da Constitui√ß√£o Federal", "Art. 1¬∫, III, da Constitui√ß√£o Federal", "Art. 5¬∫, caput, da Constitui√ß√£o Federal", "Art. 6¬∫ da Constitui√ß√£o Federal"], respostaCorreta: "Art. 1¬∫, III, da Constitui√ß√£o Federal", justificativa: "O Art. 1¬∫, inciso III, da Constitui√ß√£o Federal de 1988 estabelece que a dignidade da pessoa humana √© um dos fundamentos do Estado Democr√°tico de Direito brasileiro." },

    // --- TEORIA GERAL DO CRIME (DIREITO PENAL) ---
    { id: 13, materia: "TEORIA GERAL DO CRIME (DIREITO PENAL)", enunciado: "Segundo a Teoria Cl√°ssica ou Causalista da A√ß√£o, o crime √© composto por quais elementos?", opcoes: ["Fato T√≠pico, Ilicitude e Culpabilidade", "Tipicidade, Antijuridicidade e Punibilidade", "Conduta, Resultado e Nexo Causal", "Tipicidade, Culpabilidade e Periculosidade"], respostaCorreta: "Fato T√≠pico, Ilicitude e Culpabilidade", justificativa: "A Teoria Tripartida do Crime, adotada majoritariamente no Brasil, define o crime como Fato T√≠pico, Ilicitude (ou Antijuridicidade) e Culpabilidade. A Punibilidade √© considerada uma consequ√™ncia, e n√£o um elemento do crime." },
    { id: 14, materia: "TEORIA GERAL DO CRIME (DIREITO PENAL)", enunciado: "O Princ√≠pio da Legalidade (ou Reserva Legal), previsto no Art. 1¬∫ do C√≥digo Penal, pode ser resumido pela m√°xima:", opcoes: ["Ningu√©m ser√° processado por lei anterior", "N√£o h√° crime sem lei anterior que o defina, nem pena sem pr√©via comina√ß√£o legal", "A lei posterior s√≥ se aplica se for mais ben√©fica ao r√©u", "A ignor√¢ncia da lei √© inescus√°vel"], respostaCorreta: "N√£o h√° crime sem lei anterior que o defina, nem pena sem pr√©via comina√ß√£o legal", justificativa: "O Art. 1¬∫ do CP consagra o Princ√≠pio da Legalidade, que exige a exist√™ncia de uma lei em sentido estrito (formal e material) para definir um crime e cominar uma pena. √â o famoso aforismo latino 'Nullum crimen nulla poena sine praevia lege'." },
    { id: 15, materia: "TEORIA GERAL DO CRIME (DIREITO PENAL)", enunciado: "A desist√™ncia volunt√°ria e o arrependimento eficaz, previstos no Art. 15 do C√≥digo Penal, t√™m como consequ√™ncia:", opcoes: ["A isen√ß√£o total de pena para o agente", "A aplica√ß√£o da pena do crime tentado", "A puni√ß√£o do agente apenas pelos atos j√° praticados", "A extin√ß√£o da punibilidade pelo perd√£o judicial"], respostaCorreta: "A puni√ß√£o do agente apenas pelos atos j√° praticados", justificativa: "O Art. 15 do CP (ponte de ouro da Parte Geral) determina que o agente n√£o ser√° punido pelo crime que pretendia cometer (tentativa), mas responde apenas pelos atos j√° praticados que configurem outro crime ('puni√ß√£o do agente apenas pelos atos j√° praticados')." },

    // --- TEORIA GERAL DO DIREITO CIVIL ---
    { id: 16, materia: "TEORIA GERAL DO DIREITO CIVIL", enunciado: "Segundo o C√≥digo Civil brasileiro, qual a idade em que a pessoa atinge a capacidade civil plena, tornando-se absolutamente capaz para todos os atos da vida civil?", opcoes: ["16 anos", "18 anos", "21 anos", "14 anos, desde que emancipada"], respostaCorreta: "18 anos", justificativa: "O Art. 5¬∫ do C√≥digo Civil estabelece que a menoridade cessa aos 18 (dezoito) anos completos, quando a pessoa fica habilitada √† pr√°tica de todos os atos da vida civil (capacidade civil plena)." },
    { id: 17, materia: "TEORIA GERAL DO DIREITO CIVIL", enunciado: "O Princ√≠pio da Autonomia Privada, central no Direito Civil, manifesta-se principalmente atrav√©s de qual instituto jur√≠dico?", opcoes: ["O poder familiar", "O casamento obrigat√≥rio", "A liberdade contratual", "A sucess√£o leg√≠tima"], respostaCorreta: "A liberdade contratual", justificativa: "A Autonomia Privada √© a liberdade de o indiv√≠duo regular seus pr√≥prios interesses. Sua principal manifesta√ß√£o √© a liberdade de contratar (Art. 421 do CC), ou seja, a faculdade de escolher com quem contratar, o que contratar e em que termos." },
    { id: 18, materia: "TEORIA GERAL DO DIREITO CIVIL", enunciado: "A Personalidade Jur√≠dica da pessoa natural come√ßa:", opcoes: ["Com o registro de nascimento no cart√≥rio", "Com a concep√ß√£o (nascituro)", "Com a maioridade civil (18 anos)", "Com o nascimento com vida"], respostaCorreta: "Com o nascimento com vida", justificativa: "O Art. 2¬∫ do C√≥digo Civil estabelece que 'A personalidade civil da pessoa come√ßa do nascimento com vida; mas a lei p√µe a salvo, desde a concep√ß√£o, os direitos do nascituro.' A aquisi√ß√£o plena da personalidade se d√° com o nascimento e a respira√ß√£o." },
    { id: 19, materia: "TEORIA GERAL DO DIREITO CIVIL", enunciado: "Qual o instituto jur√≠dico que permite a declara√ß√£o judicial da morte presumida de uma pessoa que desaparece sem deixar vest√≠gios?", opcoes: ["Interdi√ß√£o", "Emancipa√ß√£o", "Curatela", "Aus√™ncia"], respostaCorreta: "Aus√™ncia", justificativa: "O instituto da Aus√™ncia (Arts. 22 a 39 do CC) trata do desaparecimento de uma pessoa de seu domic√≠lio sem deixar not√≠cias, permitindo a sucess√£o provis√≥ria e, posteriormente, a sucess√£o definitiva, que equivale √† declara√ß√£o de morte presumida para efeitos patrimoniais." },
    { id: 20, materia: "TEORIA GERAL DO DIREITO CIVIL", enunciado: "Os bens m√≥veis s√£o aqueles que:", opcoes: ["Podem ser transportados sem altera√ß√£o na sua subst√¢ncia", "Est√£o ligados ao solo de forma permanente", "S√£o inerentes √† pessoa humana (direitos da personalidade)", "S√£o considerados inalien√°veis por lei"], respostaCorreta: "Podem ser transportados sem altera√ß√£o na sua subst√¢ncia", justificativa: "O Art. 82 do C√≥digo Civil define que bens m√≥veis s√£o aqueles suscet√≠veis de movimento pr√≥prio, ou de remo√ß√£o por for√ßa alheia, sem altera√ß√£o da subst√¢ncia ou da destina√ß√£o econ√¥mico-social." },
];

// =================================================================
// 2. COMPONENTE PRINCIPAL DO APP
// =================================================================
const DisciplinasApp = () => {
    // Lista de disciplinas para exibi√ß√£o na tela inicial
    const listaDisciplinas = [
        "INTRODU√á√ÉO AO ESTUDO DO DIREITO (IED)",
        "CI√äNCIA POL√çTICA E TEORIA GERAL DO ESTADO",
        "HIST√ìRIA DO DIREITO",
        "DIREITOS HUMANOS",
        "TEORIA GERAL DO CRIME (DIREITO PENAL)",
        "TEORIA GERAL DO DIREITO CIVIL"
    ];

    // Estados da Aplica√ß√£o
    const [materiaSelecionada, setMateriaSelecionada] = useState(null);
    const [questoesFiltradas, setQuestoesFiltradas] = useState([]);
    const [questaoAtualIndex, setQuestaoAtualIndex] = useState(0);
    const [respostaSelecionada, setRespostaSelecionada] = useState(null);
    const [quizFinalizado, setQuizFinalizado] = useState(false);
    const [placar, setPlacar] = useState({ acertos: 0, erros: 0 });

    // Fun√ß√£o para iniciar o Quiz
    const iniciarQuiz = (materia) => {
        const questoes = mockDataQuestoes.filter(q => q.materia === materia);
        setMateriaSelecionada(materia);
        setQuestoesFiltradas(questoes);
        setQuestaoAtualIndex(0);
        setRespostaSelecionada(null);
        setQuizFinalizado(false);
        setPlacar({ acertos: 0, erros: 0 });
    };

    // Fun√ß√£o para verificar a resposta e atualizar o placar
    const verificarResposta = (resposta) => {
        if (respostaSelecionada !== null) return; // N√£o permitir nova sele√ß√£o

        setRespostaSelecionada(resposta);
        const questaoAtual = questoesFiltradas[questaoAtualIndex];

        if (resposta === questaoAtual.respostaCorreta) {
            setPlacar(prev => ({ ...prev, acertos: prev.acertos + 1 }));
        } else {
            setPlacar(prev => ({ ...prev, erros: prev.erros + 1 }));
        }
    };

    // Fun√ß√£o para avan√ßar para a pr√≥xima quest√£o
    const avancarQuestao = () => {
        const proximoIndex = questaoAtualIndex + 1;
        if (proximoIndex < questoesFiltradas.length) {
            setQuestaoAtualIndex(proximoIndex);
            setRespostaSelecionada(null);
        } else {
            setQuizFinalizado(true);
        }
    };

    // Fun√ß√£o para retornar √† tela inicial
    const voltarInicio = () => {
        setMateriaSelecionada(null);
        setQuestoesFiltradas([]);
    };

    // =================================================================
    // 3. FUNCIONALIDADE DE LEITURA POR VOZ (TEXT-TO-SPEECH - TTS)
    // =================================================================
    // **NOTA CR√çTICA:** A implementa√ß√£o real requer uma chamada de API e gerenciamento de √°udio.
    // O c√≥digo abaixo √© um PLACEHOLDER que simula a ativa√ß√£o, mas o fetch real
    // do √°udio e a reprodu√ß√£o devem ser tratados pelo motor de TTS do Gemini.
    // O modelo deve ser `gemini-2.5-flash-preview-tts`
    const apiKey = "SUA_API_KEY_AQUI"; // SUBSTITUIR PELA CHAVE REAL
    const TTS_API_MODEL = "gemini-2.5-flash-preview-tts";

    const lerPorVoz = useCallback((texto) => {
        if (apiKey === "SUA_API_KEY_AQUI") {
            alert("AVISO: A funcionalidade de Leitura por Voz est√° desativada. Insira a API Key do Gemini no c√≥digo para ativar.");
            console.error("TTS API Key n√£o configurada.");
            return;
        }

        // Simula√ß√£o do log da chamada (o fetch real deve ser implementado aqui)
        console.log(`TTS Ativado. Lendo: "${texto.substring(0, 50)}..." com o modelo ${TTS_API_MODEL}`);
        
        // **IMPLEMENTA√á√ÉO REAL (PSEUDOC√ìDIGO):**
        /*
        fetch('https://api.gemini.google/tts', {
            method: 'POST',
            headers: {
                'Authorization': `Bearer ${apiKey}`,
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                model: TTS_API_MODEL,
                text: texto,
                voice: 'Kore' // Voz sugerida
            })
        })
        .then(response => response.blob())
        .then(blob => {
            const url = URL.createObjectURL(blob);
            const audio = new Audio(url);
            audio.play();
        })
        .catch(error => console.error('Erro ao usar TTS API:', error));
        */

       // Exibi√ß√£o de um feedback simples na aus√™ncia do fetch real
       alert(`Lendo por voz (Simula√ß√£o): ${texto.substring(0, 50)}...`);

    }, [apiKey]);

    // =================================================================
    // 4. COMPONENTES DE RENDERIZA√á√ÉO
    // =================================================================

    // Renderiza o Dashboard (Tela Inicial)
    const renderDashboard = () => (
        <div className="space-y-6">
            <h2 className="text-3xl font-bold text-gray-800 border-b pb-3 mb-6">
                üìö 1¬∫ Semestre Direito - UNIP Para√≠so
            </h2>
            <p className="text-lg text-gray-600 mb-8">
                Selecione a mat√©ria para iniciar a revis√£o de quest√µes no formato OAB-SP.
            </p>
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                {listaDisciplinas.map((materia) => (
                    <button
                        key={materia}
                        onClick={() => iniciarQuiz(materia)}
                        className="p-6 bg-white hover:bg-yellow-500 hover:text-white text-gray-800 font-semibold rounded-lg shadow-lg transition duration-300 ease-in-out transform hover:scale-105 border border-gray-200"
                    >
                        {materia}
                    </button>
                ))}
            </div>
        </div>
    );

    // Renderiza a Tela do Quiz
    const renderQuiz = () => {
        if (questoesFiltradas.length === 0) return null;

        const questaoAtual = questoesFiltradas[questaoAtualIndex];
        const totalQuestoes = questoesFiltradas.length;
        const indice = questaoAtualIndex + 1;

        return (
            <div className="space-y-6">
                <div className="flex justify-between items-center border-b pb-4 mb-4">
                    <h2 className="text-2xl font-bold text-gray-700">
                        {materiaSelecionada}
                    </h2>
                    <span className="text-xl font-medium text-yellow-600">
                        Quest√£o {indice} de {totalQuestoes}
                    </span>
                </div>

                {/* Enunciado e Leitura por Voz */}
                <div className="bg-yellow-50 p-6 rounded-lg shadow-md border-l-4 border-yellow-500 relative">
                    <p className="text-xl font-medium text-gray-800 mb-4">{questaoAtual.enunciado}</p>
                    <button
                        onClick={() => lerPorVoz(`Enunciado: ${questaoAtual.enunciado}. Op√ß√µes: ${questaoAtual.opcoes.join(', ')}`)}
                        className="absolute top-4 right-4 p-2 bg-yellow-600 text-white rounded-full hover:bg-yellow-700 transition"
                        title="Leitura por Voz (TTS)"
                    >
                        {/* √çcone de alto-falante simples (ou SVG) */}
                        üîä
                    </button>
                </div>

                {/* Op√ß√µes de M√∫ltipla Escolha */}
                <div className="space-y-4">
                    {questaoAtual.opcoes.map((opcao, index) => {
                        let estilo = "bg-white hover:bg-gray-100 text-gray-700";
                        if (respostaSelecionada !== null) {
                            if (opcao === questaoAtual.respostaCorreta) {
                                estilo = "bg-green-100 text-green-700 font-bold border-2 border-green-500"; // Correta
                            } else if (opcao === respostaSelecionada) {
                                estilo = "bg-red-100 text-red-700 border-2 border-red-500"; // Errada selecionada
                            } else {
                                estilo = "bg-gray-50 text-gray-500 opacity-60"; // N√£o selecionada
                            }
                        }

                        return (
                            <button
                                key={index}
                                onClick={() => verificarResposta(opcao)}
                                disabled={respostaSelecionada !== null}
                                className={`w-full text-left p-4 rounded-lg shadow transition duration-200 ease-in-out ${estilo}`}
                            >
                                <span className="font-semibold mr-2">{String.fromCharCode(65 + index)}.</span> {opcao}
                            </button>
                        );
                    })}
                </div>

                {/* Feedback Imediato e Bot√£o Avan√ßar */}
                {respostaSelecionada !== null && (
                    <div className="mt-8">
                        <div className={`p-4 rounded-lg shadow-inner ${respostaSelecionada === questaoAtual.respostaCorreta ? 'bg-green-50 border border-green-300' : 'bg-red-50 border border-red-300'}`}>
                            <h3 className="font-bold text-lg mb-2">
                                {respostaSelecionada === questaoAtual.respostaCorreta ? '‚úÖ Resposta Correta!' : '‚ùå Resposta Incorreta!'}
                            </h3>
                            <p className="text-gray-700">
                                **Justificativa:** {questaoAtual.justificativa}
                            </p>
                        </div>
                        <div className="text-right mt-6">
                            <button
                                onClick={avancarQuestao}
                                className="px-8 py-3 bg-blue-600 text-white font-bold rounded-lg shadow-md hover:bg-blue-700 transition duration-300"
                            >
                                {proximoIndex < totalQuestoes ? 'Pr√≥xima Quest√£o ¬ª' : 'Finalizar Quiz ¬ª'}
                            </button>
                        </div>
                    </div>
                )}
            </div>
        );
    };

    // Renderiza a Tela de Resultado
    const renderResultado = () => (
        <div className="text-center p-8 bg-white rounded-lg shadow-2xl">
            <h2 className="text-4xl font-extrabold text-blue-700 mb-4">
                ‚ú® Quiz Finalizado! ‚ú®
            </h2>
            <p className="text-xl text-gray-600 mb-8">
                Parab√©ns, voc√™ concluiu a revis√£o de **{materiaSelecionada}**.
            </p>

            <div className="flex justify-center space-x-10 mb-10">
                <div className="p-6 bg-green-50 rounded-lg border-b-4 border-green-500">
                    <p className="text-3xl font-bold text-green-600">{placar.acertos}</p>
                    <p className="text-lg text-green-700">Acertos</p>
                </div>
                <div className="p-6 bg-red-50 rounded-lg border-b-4 border-red-500">
                    <p className="text-3xl font-bold text-red-600">{placar.erros}</p>
                    <p className="text-lg text-red-700">Erros</p>
                </div>
            </div>

            <button
                onClick={voltarInicio}
                className="px-10 py-4 bg-yellow-600 text-white font-bold rounded-lg shadow-lg hover:bg-yellow-700 transition duration-300 transform hover:scale-105"
            >
                Voltar ao Menu Principal
            </button>
        </div>
    );

    // =================================================================
    // 5. RENDERIZA√á√ÉO CONDICIONAL PRINCIPAL
    // =================================================================
    let conteudo;
    if (materiaSelecionada === null) {
        conteudo = renderDashboard();
    } else if (quizFinalizado) {
        conteudo = renderResultado();
    } else {
        conteudo = renderQuiz();
    }

    return (
        <div className="min-h-screen bg-gray-100 p-4 sm:p-8 flex justify-center items-start pt-10">
            <div className="w-full max-w-4xl p-6 md:p-10 bg-white rounded-xl shadow-2xl">
                <header className="mb-8">
                    <h1 className="text-4xl font-extrabold text-blue-900 border-b-4 border-blue-500 pb-2">
                        ‚öñÔ∏è UNIP | Foco OAB-SP - Revis√£o 1¬∫ Semestre
                    </h1>
                </header>
                {conteudo}
            </div>
        </div>
    );
};

export default DisciplinasApp;

// =================================================================
// ESTRUTURA PARA EXPORTA√á√ÉO (Se estiver usando um setup com create-react-app ou similar)
// Se for um ambiente simples de HTML, o componente precisa ser renderizado:
/*
import { createRoot } from 'react-dom/client';
const container = document.getElementById('root');
const root = createRoot(container);
root.render(<DisciplinasApp />);
*/